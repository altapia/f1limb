---
import type {Apuesta} from '@/lib/model'
import listApuestas from '@/content/01_bahrain/apuestas.json'

import {usuarios} from '@/lib/usuarios'


usuarios.forEach(u=>{
    let apuestasUsuario : Apuesta[] = (listApuestas as Apuesta[]).filter(a=> a.user.id === u.id)
    u.apuestas = apuestasUsuario
})

/* 
interface Props {
  apuesta: Apuesta
}

const { apuesta } = Astro.props
const { id, user, descripcion, importe, cuota, estado } = apuesta
 */

// const apuestas = await Astro.glob('@/content/*/apuestas.json');
---

<section>
    <h2 class="text-3xl font-bold">Apuestas - GP Bahrain 2024</h2>
    <ul>
    {usuarios.map(u => (
        <li>
            <h4 class="m-5 text-2xl">{u.nombre} 
                <small class="text-xs bg-orange-400 p-1 rounded-lg">{u.team.nombre}</small>
            </h4>
            <ul class="mx-7">
                {
                    u.apuestas?.map(a => (
                        <li>
                            {a.descripcion} 
                            <span class="font-semibold">{a.importe}â‚¬</span> 
                            <span class="font-semibold">@{a.cuota}</span>
                        </li>
                    ))
                }
            </ul>
        </li>
    ))}
    </ul>


</section>